// Language translations
const translations = {
  en: {
    nav: {
      home: "Home",
      features: "Features",
      howItWorks: "Installation Guide",
      browsers: "Supported Browsers",
      faq: "FAQ",
      download: "Download Flect"
    },
    hero: {
      title: "Your Ultimate Design Toolkit",
      subtitle: "Flect is a service created for designers who value their time. Everything you need is packed into one extension.",
      downloadFlect: "Download Flect",
      supportProject: "Support Project",
      joinTelegram: "Join our Telegram"
    },
    features: {
      title: "What Flect Can Do (Version 1.0)",
      subtitle: "Everything you need for your design workflow",
      fontDetector: {
        title: "Font Detector",
        description: "Identify any font on any website with detailed typography information. No more digging through code!"
      },
      smartRuler: {
        title: "Smart Ruler",
        description: "Measure any interface elements directly in your browser with pixel-perfect precision. No screenshots or third-party tools needed!"
      },
      styleCopier: {
        title: "Style Copier",
        description: "Easily copy text, even if it's protected from regular selection."
      }
    },
    howItWorks: {
      title: "Installation Guide",
      subtitle: "Get started in just a few clicks",
      step1: {
        title: "Install the Extension",
        description: "Add Flect to your browser by enabling Developer Mode and loading the extension. Save the extension folder in a secure location, as deleting it will cause the extension to stop working."
      },
      step2: {
        title: "Activate the Tool",
        description: "Click the Flect icon in your toolbar and select the tool you need."
      },
      step3: {
        title: "Start Designing",
        description: "Use the intuitive interface to inspect, measure and copy design elements."
      }
    },
    browsers: {
      title: "Supported Browsers",
      subtitle: "Flect works seamlessly with your favorite browsers"
    },
    faq: {
      title: "Frequently Asked Questions",
      subtitle: "Find answers to common questions about Flect",
      q1: {
        title: "What is Flect and what is it used for?",
        description: "Flect is a free, open-source browser extension designed specifically for designers. It provides a set of useful tools directly in your browser, helping to save time and simplify workflows."
      },
      q2: {
        title: "How much does Flect cost?",
        description: "Flect is completely free for all users!"
      },
      q3: {
        title: "Do I need to register to use Flect?",
        description: "No, registration is not required. Just install the extension and start using it."
      },
      q4: {
        title: "Is Flect safe for my data?",
        description: "Yes, Flect is designed with user privacy in mind. We do not collect personal data without your knowledge. Since Flect's code is open-source, you can verify its safety yourself."
      },
      q5: {
        title: "How to install Flect?",
        description: "Find installation instructions for different browsers <a href='#' class='faq-link'>here</a>."
      },
      q6: {
        title: "How to activate Flect tools?",
        description: "Tools are typically activated by clicking the Flect icon in the browser's extensions toolbar."
      },
      q7: {
        title: "Flect isn't working, what should I do?",
        description: "Ensure your browser meets the minimum requirements (see <a href='#supported-browsers' class='faq-link'>supported browsers</a>). If the issue persists, please report it to us <a href='https://t.me/MarselcreativeManager' class='faq-link'>here</a>."
      },
      q8: {
        title: "How to use the font detector?",
        description: "Activate the tool, hover over text on a page — Flect will display the font name and its characteristics."
      },
      q9: {
        title: "How to use the ruler for measurements?",
        description: "Activate the tool, select the mode, hold the right mouse button to measure the distance between any two points on the screen, or switch to automatic mode."
      },
      q10: {
        title: "How to copy protected content?",
        description: "Activate the tool, then try to select and copy the desired text."
      },
      q11: {
        title: "Will new features be added?",
        description: "Yes, we are actively working on Flect's development and plan to add new useful tools in future updates. Stay tuned for our news! You can also send your suggestions to our manager <a href='https://t.me/MarselcreativeManager' class='faq-link'>here</a>."
      },
      q12: {
        title: "How can I suggest a new feature or report a bug?",
        description: "If you have questions or issues, you can contact our manager <a href='https://t.me/MarselcreativeManager' class='faq-link'>here</a>."
      }
    },
    cta: {
      title: "Ready to Elevate Your Design Workflow?",
      description: "Join thousands of designers using Flect to save time and work more efficiently.",
      button: "Download Flect"
    },
    footer: {
      copyright: "© 2025 Flect. All rights reserved.",
      privacy: "Privacy Policy",
      terms: "Terms of Service",
      cookie: "Cookie Policy"
    },
    privacy: {
      title: "Privacy Policy",
      intro: "At Flect, we are committed to protecting your privacy. This Privacy Policy explains how we handle your information when you use our browser extension.",
      dataCollection: {
        title: "Data Collection",
        description: "Flect is designed to operate locally within your browser. We do not collect personal data, such as your name, email address, or browsing history, without your explicit consent. The extension processes data (e.g., font information, measurements) solely to provide its functionality and does not transmit this data to external servers."
      },
      dataUsage: {
        title: "Data Usage",
        description: "Any data processed by Flect, such as font details or measurements, is used only to deliver the requested features (e.g., font detection, ruler measurements). We do not use this data for analytics, advertising, or any other purpose."
      },
      dataSharing: {
        title: "Data Sharing",
        description: "We do not share, sell, or disclose any data processed by Flect to third parties."
      },
      security: {
        title: "Security",
        description: "Flect is an open-source project, allowing you to review its code for transparency. We implement reasonable measures to ensure the extension operates securely within your browser."
      },
      changes: {
        title: "Changes to This Policy",
        description: "We may update this Privacy Policy from time to time. Any changes will be reflected on this page, and we encourage you to review it periodically."
      },
      contact: {
        title: "Contact Us",
        description: "If you have questions about this Privacy Policy, please contact us at <a href='https://t.me/MarselcreativeManager' class='faq-link'>Telegram</a>."
      }
    },
    terms: {
      title: "Terms of Service",
      intro: "By using Flect, you agree to these Terms of Service. Please read them carefully.",
      use: {
        title: "Use of Flect",
        description: "Flect is a free, open-source browser extension provided 'as is.' You may use it for personal or professional purposes in accordance with these terms."
      },
      restrictions: {
        title: "Restrictions",
        description: "You may not modify, distribute, or create derivative works of Flect without permission, except as allowed by its open-source license. You may not use Flect for illegal activities."
      },
      liability: {
        title: "Limitation of Liability",
        description: "Flect is provided without warranties of any kind. We are not liable for any damages arising from your use of the extension."
      },
      termination: {
        title: "Termination",
        description: "You may stop using Flect at any time by uninstalling the extension. We reserve the right to discontinue Flect or modify its features at any time."
      },
      changes: {
        title: "Changes to These Terms",
        description: "We may update these Terms of Service from time to time. Changes will be posted on this page, and continued use of Flect constitutes acceptance of the updated terms."
      },
      contact: {
        title: "Contact Us",
        description: "If you have questions about these Terms of Service, please contact us at <a href='https://t.me/MarselcreativeManager' class='faq-link'>Telegram</a>."
      }
    },
    cookie: {
      title: "Cookie Policy",
      intro: "This Cookie Policy explains how Flect uses cookies and similar technologies.",
      noCookies: {
        title: "No Cookies Used",
        description: "Flect does not use cookies or any similar tracking technologies. The extension operates locally within your browser and does not store or transmit data via cookies."
      },
      thirdParty: {
        title: "Third-Party Services",
        description: "Flect does not integrate with third-party services that use cookies. If you access external links (e.g., our Telegram channel), those sites may have their own cookie policies."
      },
      changes: {
        title: "Changes to This Policy",
        description: "We may update this Cookie Policy from time to time. Changes will be reflected on this page, and we encourage you to review it periodically."
      },
      contact: {
        title: "Contact Us",
        description: "If you have questions about this Cookie Policy, please contact us at <a href='https://t.me/MarselcreativeManager' class='faq-link'>Telegram</a>."
      }
    }
  },
  ru: {
    nav: {
      home: "Главная",
      features: "Функции",
      howItWorks: "Инструкция по установке",
      browsers: "Браузеры",
      faq: "FAQ",
      download: "Скачать Flect"
    },
    hero: {
      title: "Ваш идеальный набор инструментов для дизайна",
      subtitle: "Flect — сервис, созданный для дизайнеров, которым важно не тратить время на мелочи. Всё нужное собрано в одном расширении.",
      downloadFlect: "Скачать Flect",
      supportProject: "Поддержать проект",
      joinTelegram: "Telegram канал"
    },
    features: {
      title: "Что уже умеет Flect (Версия 1.0)",
      subtitle: "Все необходимое для вашего рабочего процесса",
      fontDetector: {
        title: "Детектор Шрифтов",
        description: "Узнавайте название и характеристики шрифта на любом сайте, забудьте о долгих поисках в коде!"
      },
      smartRuler: {
        title: "Линейка",
        description: "Измеряйте любые элементы интерфейса прямо в браузере с пиксельной точностью. Больше не нужны скриншоты и сторонние инструменты!"
      },
      styleCopier: {
        title: "Копирование",
        description: "Легко копируйте текст, даже если он защищён от обычного выделения."
      }
    },
    howItWorks: {
      title: "Инструкция по установке",
      subtitle: "Начните работу всего в несколько кликов",
      step1: {
        title: "Установите расширение",
        description: "Добавьте Flect в ваш браузер, включив режим разработчика и загрузив расширение. Сохраните папку с расширением в надежном месте, так как ее удаление приведет к прекращению работы расширения."
      },
      step2: {
        title: "Активируйте инструмент",
        description: "Нажмите на иконку Flect на панели инструментов и выберите нужный инструмент."
      },
      step3: {
        title: "Начните проектировать",
        description: "Используйте интуитивный интерфейс для проверки, измерения и копирования элементов дизайна."
      }
    },
    browsers: {
      title: "Поддерживаемые браузеры",
      subtitle: "Flect работает безупречно в ваших любимых браузерах"
    },
    faq: {
      title: "Часто задаваемые вопросы",
      subtitle: "Найдите ответы на распространенные вопросы о Flect",
      q1: {
        title: "Что такое Flect и для чего он нужен?",
        description: "Flect — это бесплатное расширение для браузера с открытым исходным кодом, разработанное специально для дизайнеров. Оно предоставляет набор полезных инструментов прямо в вашем браузере, помогая экономить время и упрощать рабочие процессы."
      },
      q2: {
        title: "Сколько стоит Flect?",
        description: "Flect абсолютно бесплатен для всех пользователей!"
      },
      q3: {
        title: "Нужно ли регистрироваться для использования Flect?",
        description: "Нет, регистрация не требуется. Просто установите расширение и начинайте пользоваться."
      },
      q4: {
        title: "Является ли Flect безопасным для моих данных?",
        description: "Да, Flect разработан с учетом конфиденциальности пользователей. Мы не собираем личные данные без вашего ведома. Поскольку код Flect открыт, вы можете самостоятельно убедиться в его безопасности."
      },
      q5: {
        title: "Как установить Flect?",
        description: "Найдите инструкции по установке для разных браузеров <a href='#how-it-works' class='faq-link'>здесь</a>."
      },
      q6: {
        title: "Как активировать инструменты Flect?",
        description: "Обычно инструменты активируются нажатием на иконку Flect в панели расширений браузера."
      },
      q7: {
        title: "Flect не работает, что делать?",
        description: "Убедитесь, что ваш браузер соответствует минимальным требованиям (см. <a href='#supported-browsers' class='faq-link'>поддерживаемые браузеры</a>). Если проблема сохраняется, пожалуйста, сообщите нам об этом <a href='https://t.me/MarselcreativeManager' class='faq-link'>здесь</a>."
      },
      q8: {
        title: "Как пользоваться детектором шрифтов?",
        description: "Активируйте инструмент, выделите курсором текст на странице — Flect покажет название шрифта и его характеристики."
      },
      q9: {
        title: "Как использовать линейку для измерения?",
        description: "Активируйте инструмент, выберите режим, зажмите правую кнопку мыши, чтобы измерить расстояние между любыми двумя точками на экране, либо перейдите в автоматический режим."
      },
      q10: {
        title: "Как копировать защищенный контент?",
        description: "Активируйте инструмент, попробуйте выделить и скопировать нужный текст."
      },
      q11: {
        title: "Будут ли добавляться новые функции?",
        description: "Да, мы активно работаем над развитием Flect и планируем добавлять новые полезные инструменты в будущих обновлениях. Следите за нашими новостями! Вы так же можете написать свои предложения нашему менеджеру <a href='https://t.me/MarselcreativeManager' class='faq-link'>здесь</a>."
      },
      q12: {
        title: "Как я могу предложить новую функцию или сообщить об ошибке?",
        description: "Если у вас возникли вопросы или проблемы, вы можете обратиться к нашему менеджеру <a href='https://t.me/MarselcreativeManager' class='faq-link'>здесь</a>."
      }
    },
    cta: {
      title: "Готовы улучшить свой рабочий процесс дизайна?",
      description: "Присоединяйтесь к тысячам дизайнеров, использующих Flect для экономии времени и более эффективной работы.",
      button: "Скачать Flect"
    },
    footer: {
      copyright: "© 2025 Flect. Все права защищены.",
      privacy: "Политика конфиденциальности",
      terms: "Условия использования",
      cookie: "Политика cookie"
    },
    privacy: {
      title: "Политика конфиденциальности",
      intro: "В Flect мы стремимся защищать вашу конфиденциальность. Настоящая Политика конфиденциальности объясняет, как мы обрабатываем вашу информацию при использовании нашего расширения для браузера.",
      dataCollection: {
        title: "Сбор данных",
        description: "Flect работает локально в вашем браузере. Мы не собираем персональные данные, такие как ваше имя, адрес электронной почты или историю просмотров, без вашего явного согласия. Расширение обрабатывает данные (например, информацию о шрифтах, измерения) исключительно для предоставления своих функций и не передает эти данные на внешние серверы."
      },
      dataUsage: {
        title: "Использование данных",
        description: "Любые данные, обрабатываемые Flect, такие как детали шрифтов или измерения, используются только для предоставления запрошенных функций (например, детектор шрифтов, линейка). Мы не используем эти данные для аналитики, рекламы или других целей."
      },
      dataSharing: {
        title: "Передача данных",
        description: "Мы не передаем, не продаем и не раскрываем данные, обрабатываемые Flect, третьим лицам."
      },
      security: {
        title: "Безопасность",
        description: "Flect — это проект с открытым исходным кодом, что позволяет вам проверить его код для обеспечения прозрачности. Мы принимаем разумные меры для обеспечения безопасной работы расширения в вашем браузере."
      },
      changes: {
        title: "Изменения в настоящей политике",
        description: "Мы можем время от времени обновлять эту Политику конфиденциальности. Любые изменения будут отражены на этой странице, и мы рекомендуем вам периодически ее просматривать."
      },
      contact: {
        title: "Свяжитесь с нами",
        description: "Если у вас есть вопросы по поводу этой Политики конфиденциальности, пожалуйста, свяжитесь с нами через <a href='https://t.me/MarselcreativeManager' class='faq-link'>Telegram</a>."
      }
    },
    terms: {
      title: "Условия использования",
      intro: "Используя Flect, вы соглашаетесь с настоящими Условиями использования. Пожалуйста, внимательно их прочитайте.",
      use: {
        title: "Использование Flect",
        description: "Flect — это бесплатное расширение для браузера с открытым исходным кодом, предоставляемое 'как есть'. Вы можете использовать его в личных или профессиональных целях в соответствии с настоящими условиями."
      },
      restrictions: {
        title: "Ограничения",
        description: "Вы не можете изменять, распространять или создавать производные работы на основе Flect без разрешения, за исключением случаев, предусмотренных его лицензией с открытым исходным кодом. Вы не можете использовать Flect для незаконной деятельности."
      },
      liability: {
        title: "Ограничение ответственности",
        description: "Flect предоставляется без каких-либо гарантий. Мы не несем ответственности за любые убытки, возникшие в результате использования расширения."
      },
      termination: {
        title: "Прекращение использования",
        description: "Вы можете прекратить использование Flect в любое время, удалив расширение. Мы оставляем за собой право прекратить предоставление Flect или изменить его функции в любое время."
      },
      changes: {
        title: "Изменения в настоящих условиях",
        description: "Мы можем время от времени обновлять эти Условия использования. Изменения будут размещены на этой странице, и дальнейшее использование Flect означает принятие обновленных условий."
      },
      contact: {
        title: "Свяжитесь с нами",
        description: "Если у вас есть вопросы по поводу этих Условий использования, пожалуйста, свяжитесь с нами через <a href='https://t.me/MarselcreativeManager' class='faq-link'>Telegram</a>."
      }
    },
    cookie: {
      title: "Политика cookie",
      intro: "Настоящая Политика cookie объясняет, как Flect использует файлы cookie и подобные технологии.",
      noCookies: {
        title: "Файлы cookie не используются",
        description: "Flect не использует файлы cookie или любые подобные технологии отслеживания. Расширение работает локально в вашем браузере и не сохраняет или передает данные через cookie."
      },
      thirdParty: {
        title: "Сторонние сервисы",
        description: "Flect не интегрируется со сторонними сервисами, использующими cookie. Если вы переходите по внешним ссылкам (например, на наш Telegram-канал), эти сайты могут иметь собственные политики cookie."
      },
      changes: {
        title: "Изменения в настоящей политике",
        description: "Мы можем время от времени обновлять эту Политику cookie. Изменения будут отражены на этой странице, и мы рекомендуем вам периодически ее просматривать."
      },
      contact: {
        title: "Свяжитесь с нами",
        description: "Если у вас есть вопросы по поводу этой Политики cookie, пожалуйста, свяжитесь с нами через <a href='https://t.me/MarselcreativeManager' class='faq-link'>Telegram</a>."
      }
    }
  }
};

// Language handling
function setLanguage(lang) {
  const elements = document.querySelectorAll('[data-i18n]');

  // Fade out
  document.body.style.transition = 'opacity 0.3s ease';
  document.body.style.opacity = '0';

  setTimeout(() => {
    elements.forEach(element => {
      const key = element.getAttribute('data-i18n');
      const keys = key.split('.');
      let value = translations[lang];

      for (const k of keys) {
        value = value[k];
        if (!value) return;
      }

      if (element.tagName === 'P' || element.tagName === 'SPAN' || element.tagName === 'A') {
        element.innerHTML = value;
      } else {
        element.textContent = value;
      }
    });

    // Update active language button
    document.querySelectorAll('.lang-btn').forEach(btn => {
      btn.classList.toggle('active', btn.getAttribute('data-lang') === lang);
    });

    document.documentElement.lang = lang;

    // Fade in
    document.body.style.opacity = '1';
  }, 300);
}

// Intersection Observer for animations
const animateElements = document.querySelectorAll('.animate');
const observer = new IntersectionObserver((entries) => {
  entries.forEach(entry => {
    if (entry.isIntersecting) {
      entry.target.classList.add('visible');
    }
  });
}, { threshold: 0.1 });

animateElements.forEach(element => {
  observer.observe(element);
});

// Initialize
document.addEventListener('DOMContentLoaded', function() {
  const hamburger = document.querySelector('.hamburger');
  const navLinks = document.querySelector('.nav-links');
  const faqQuestions = document.querySelectorAll('.faq-question');

  // Set initial language
  setLanguage('en');

  // Language switcher
  document.querySelectorAll('.lang-btn').forEach(button => {
    button.addEventListener('click', () => {
      setLanguage(button.getAttribute('data-lang'));
    });
  });

  // Mobile Navigation
  hamburger.addEventListener('click', function() {
    navLinks.classList.toggle('active');
  });

  // Close mobile menu on link click
  document.querySelectorAll('.nav-links a').forEach(link => {
    link.addEventListener('click', () => {
      if (window.innerWidth <= 768) {
        navLinks.classList.remove('active');
      }
    });
  });

  // Smooth scrolling for anchor links
  document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function(e) {
      e.preventDefault();
      const targetId = this.getAttribute('href');
      if (targetId === '#') return;

      const targetElement = document.querySelector(targetId);
      if (targetElement) {
        window.scrollTo({
          top: targetElement.offsetTop - 80,
          behavior: 'smooth'
        });
      }
    });
  });

  // FAQ accordion
  faqQuestions.forEach(question => {
    question.addEventListener('click', () => {
      const parent = question.parentElement;
      const isActive = parent.classList.contains('active');

      // Close all other FAQs
      document.querySelectorAll('.faq-item').forEach(item => {
        item.classList.remove('active');
      });

      // Toggle current FAQ
      if (!isActive) {
        parent.classList.add('active');
      }
    });
  });
});